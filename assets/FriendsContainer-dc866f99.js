var _=Object.defineProperty;var j=(e,t,r)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var f=(e,t,r)=>(j(e,typeof t!="symbol"?t+"":t,r),r);import{e as w,j as s,f as u,p as v,P as C,c as U,R as b,q as A,s as F,t as W,v as I}from"./index-2b5457b2.js";import{d as k}from"./default-user-img-578decf0.js";const q="_pagination_1cr1o_1",B="_pageNumbers_1cr1o_7",S="_pageButton_1cr1o_32",D="_selectedPage_1cr1o_50",i={pagination:q,pageNumbers:B,pageButton:S,selectedPage:D},x=({totalUsersCount:e,pageSize:t,portionSize:r=10,onPageChangeHandler:a,currentPage:n})=>{let c=Math.ceil(e/t),g=[];for(let o=1;o<=c;o++)g.push(o);let d=Math.ceil(c/r),[l,m]=w.useState(1),P=(l-1)*r+1,N=l*r;return s.jsxs("div",{className:i.pagination,children:[l>1&&s.jsx("div",{className:i.pageButton,onClick:()=>{m(l-1)},children:"Prev"}),s.jsxs("div",{className:i.pageNumbers,children:[g.filter(o=>o>=P&&o<=N).map(o=>s.jsx("span",{className:n===o?u([i.pagination],"span",[i.selectedPage]):u([i.pagination],"span"),onClick:()=>{a(o)},children:o},o)),d>l&&s.jsx("div",{className:i.pageButton,onClick:()=>{m(l+1)},children:"Next"})]})]})},M="_friendsWrapper_1xwxq_1",R="_usersContainer_1xwxq_6",z="_userProfileWrapper_1xwxq_12",E="_userAvatar_1xwxq_26",H="_userName_1xwxq_32",p={friendsWrapper:M,usersContainer:R,userProfileWrapper:z,userAvatar:E,userName:H},h=({name:e,classN:t})=>s.jsx("button",{className:t,children:e}),O=({user:e,getFollowUser:t,getUnfollowUser:r,followingInProgress:a})=>s.jsx(v,{to:"/profile/"+e.id,className:p.userProfileWrapper,children:s.jsxs("div",{children:[s.jsx("img",{className:p.userAvatar,src:e.photos.small?e.photos.small:k,alt:"Avatar"}),s.jsx("div",{className:p.userName,children:e.name.charAt(0).toUpperCase()+e.name.slice(1)}),s.jsx("div",{className:p.userStatus,children:e.status===null?"No status":e.status}),e.followed?s.jsx("div",{onClick:n=>{n.preventDefault(),n.stopPropagation(),r(e.id)},children:s.jsx(h,{name:"- Unfollow",classN:u("follow-btn","unfollow-btn")})}):s.jsx("div",{onClick:n=>{n.preventDefault(),n.stopPropagation(),t(e.id)},children:s.jsx(h,{name:"+ Follow",classN:"follow-btn"})})]})}),$=({allUsers:e,currentPage:t,pageSize:r,totalUsersCount:a,onPageChangeHandler:n,getUnfollowUser:c,getFollowUser:g,followingInProgress:d})=>e?s.jsxs("div",{className:p.friendsWrapper,children:[e&&s.jsx(x,{totalUsersCount:a,allUsers:e,pageSize:r,onPageChangeHandler:n,currentPage:t}),s.jsx("div",{className:p.usersContainer,children:e.map(l=>s.jsx(O,{user:l,currentPage:t,pageSize:r,getUnfollowUser:c,getFollowUser:g,followingInProgress:d},l.id))}),s.jsx(x,{totalUsersCount:a,allUsers:e,pageSize:r,onPageChangeHandler:n,currentPage:t})]}):s.jsx("div",{children:s.jsx(C,{})});class L extends b.Component{constructor(){super(...arguments);f(this,"onPageChangeHandler",r=>{const{pageSize:a}=this.props;this.props.getAllUsers(r,a)})}componentDidMount(){const{currentPage:r,pageSize:a}=this.props;this.props.getAllUsers(r,a)}render(){return s.jsx($,{getAllUsers:this.props.getAllUsers,allUsers:this.props.allUsers,pageSize:this.props.pageSize,currentPage:this.props.currentPage,totalUsersCount:this.props.totalUsersCount,onPageChangeHandler:this.onPageChangeHandler,getFollowUser:this.props.getFollowUser,getUnfollowUser:this.props.getUnfollowUser,followingInProgress:this.props.followingInProgress})}}const T=e=>({allUsers:e.friendsPage.users,pageSize:e.friendsPage.pageSize,currentPage:e.friendsPage.currentPage,totalUsersCount:e.friendsPage.totalUsersCount,followingInProgress:e.friendsPage.followingInProgress}),K=U(T,{getAllUsers:A,setCurrentPage:F,getFollowUser:W,getUnfollowUser:I})(L);export{K as default};
