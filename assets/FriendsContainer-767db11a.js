var N=Object.defineProperty;var _=(e,t,r)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var f=(e,t,r)=>(_(e,typeof t!="symbol"?t+"":t,r),r);import{f as C,j as s,g as m,q as j,d as w,P as U,c as v,R as b,s as F,t as A,v as W,w as k,x as q}from"./index-35da9cd1.js";const S="_pagination_1cr1o_1",B="_pageNumbers_1cr1o_7",I="_pageButton_1cr1o_32",D="_selectedPage_1cr1o_50",p={pagination:S,pageNumbers:B,pageButton:I,selectedPage:D},h=({totalUsersCount:e,pageSize:t,portionSize:r=5,onPageChangeHandler:o,currentPage:l})=>{let a=Math.ceil(e/t),g=[];for(let n=1;n<=a;n++)g.push(n);let u=Math.ceil(a/r),[i,d]=C.useState(1),x=(i-1)*r+1,P=i*r;return s.jsxs("div",{className:p.pagination,children:[i>1&&s.jsx("div",{className:p.pageButton,onClick:()=>{d(i-1)},children:"Prev"}),s.jsxs("div",{className:p.pageNumbers,children:[g.filter(n=>n>=x&&n<=P).map(n=>s.jsx("span",{className:l===n?m([p.pagination],"span",[p.selectedPage]):m([p.pagination],"span"),onClick:()=>{o(n)},children:n},n)),u>i&&s.jsx("div",{className:p.pageButton,onClick:()=>{d(i+1)},children:"Next"})]})]})},M="_friendsWrapper_1xwxq_1",R="_usersContainer_1xwxq_6",z="_userProfileWrapper_1xwxq_12",E="_userAvatar_1xwxq_26",H="_userName_1xwxq_32",c={friendsWrapper:M,usersContainer:R,userProfileWrapper:z,userAvatar:E,userName:H},O=({user:e,getFollowUser:t,getUnfollowUser:r,followingInProgress:o,setFriend:l})=>s.jsx(j,{to:"/profile/"+e.id,className:c.userProfileWrapper,children:s.jsxs("div",{children:[s.jsx("img",{className:c.userAvatar,src:e.photos.small?e.photos.small:w,alt:"Avatar"}),s.jsx("div",{className:c.userName,children:e.name.charAt(0).toUpperCase()+e.name.slice(1)}),s.jsx("div",{className:c.userStatus,children:e.status===null?"No status":e.status}),e.followed?s.jsx("button",{className:m("follow-btn","unfollow-btn"),onClick:a=>{a.preventDefault(),a.stopPropagation(),r(e.id),l()},disabled:o.some(a=>a===e.id),children:"- Unfollow"}):s.jsx("button",{className:"follow-btn",onClick:a=>{a.preventDefault(),a.stopPropagation(),t(e.id),l()},disabled:o.some(a=>a===e.id),children:"+ Follow"})]})}),$=({allUsers:e,currentPage:t,pageSize:r,totalUsersCount:o,onPageChangeHandler:l,getUnfollowUser:a,getFollowUser:g,followingInProgress:u,setFriend:i})=>e?s.jsxs("div",{className:c.friendsWrapper,children:[e&&s.jsx(h,{totalUsersCount:o,allUsers:e,pageSize:r,onPageChangeHandler:l,currentPage:t}),s.jsx("div",{className:c.usersContainer,children:e.map(d=>s.jsx(O,{user:d,currentPage:t,pageSize:r,getUnfollowUser:a,getFollowUser:g,followingInProgress:u,setFriend:i},d.id))}),s.jsx(h,{totalUsersCount:o,allUsers:e,pageSize:r,onPageChangeHandler:l,currentPage:t})]}):s.jsx("div",{children:s.jsx(U,{})});class L extends b.Component{constructor(){super(...arguments);f(this,"onPageChangeHandler",r=>{const{pageSize:o}=this.props;this.props.getAllUsers(r,o)})}componentDidMount(){const{currentPage:r,pageSize:o}=this.props;this.props.getAllUsers(r,o),this.props.getFriends(this.props.totalFriendsCount)}render(){return s.jsx($,{getAllUsers:this.props.getAllUsers,allUsers:this.props.allUsers,pageSize:this.props.pageSize,currentPage:this.props.currentPage,totalUsersCount:this.props.totalUsersCount,onPageChangeHandler:this.onPageChangeHandler,getFollowUser:this.props.getFollowUser,getUnfollowUser:this.props.getUnfollowUser,followingInProgress:this.props.followingInProgress,setFriend:this.props.getFriends})}}const T=e=>({allUsers:e.friendsPage.users,pageSize:e.friendsPage.pageSize,currentPage:e.friendsPage.currentPage,totalUsersCount:e.friendsPage.totalUsersCount,totalFriendsCount:e.friendsSidebar.totalUsersCount,followingInProgress:e.friendsPage.followingInProgress}),J=v(T,{getAllUsers:F,setCurrentPage:A,getFollowUser:W,getUnfollowUser:k,getFriends:q})(L);export{J as default};
