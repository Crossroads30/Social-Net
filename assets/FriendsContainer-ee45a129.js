var _=Object.defineProperty;var x=(e,t,r)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var f=(e,t,r)=>(x(e,typeof t!="symbol"?t+"":t,r),r);import{e as j,j as s,f as m,p as C,P as v,c as U,R as b,q as w,s as k,t as A,v as W}from"./index-def51715.js";import{d as F}from"./default-user-img-578decf0.js";const B="_pagination_1cr1o_1",I="_pageNumbers_1cr1o_7",S="_pageButton_1cr1o_32",D="_selectedPage_1cr1o_50",p={pagination:B,pageNumbers:I,pageButton:S,selectedPage:D},h=({totalUsersCount:e,pageSize:t,portionSize:r=10,onPageChangeHandler:o,currentPage:i})=>{let a=Math.ceil(e/t),g=[];for(let n=1;n<=a;n++)g.push(n);let u=Math.ceil(a/r),[l,d]=j.useState(1),P=(l-1)*r+1,N=l*r;return s.jsxs("div",{className:p.pagination,children:[l>1&&s.jsx("div",{className:p.pageButton,onClick:()=>{d(l-1)},children:"Prev"}),s.jsxs("div",{className:p.pageNumbers,children:[g.filter(n=>n>=P&&n<=N).map(n=>s.jsx("span",{className:i===n?m([p.pagination],"span",[p.selectedPage]):m([p.pagination],"span"),onClick:()=>{o(n)},children:n},n)),u>l&&s.jsx("div",{className:p.pageButton,onClick:()=>{d(l+1)},children:"Next"})]})]})},M="_friendsWrapper_ugkd6_1",R="_usersContainer_ugkd6_6",z="_userProfileWrapper_ugkd6_12",E="_userAvatar_ugkd6_26",H="_userName_ugkd6_32",c={friendsWrapper:M,usersContainer:R,userProfileWrapper:z,userAvatar:E,userName:H},O=({user:e,getFollowUser:t,getUnfollowUser:r,followingInProgress:o,setFriend:i})=>s.jsx(C,{to:"/profile/"+e.id,className:c.userProfileWrapper,children:s.jsxs("div",{children:[s.jsx("img",{className:c.userAvatar,src:e.photos.small?e.photos.small:F,alt:"Avatar"}),s.jsx("div",{className:c.userName,children:e.name.charAt(0).toUpperCase()+e.name.slice(1)}),s.jsx("div",{className:c.userStatus,children:e.status===null?"No status":e.status}),e.followed?s.jsx("button",{className:m("follow-btn","unfollow-btn"),onClick:a=>{a.preventDefault(),a.stopPropagation(),r(e.id),i()},disabled:o.some(a=>a===e.id),children:"- Unfollow"}):s.jsx("button",{className:"follow-btn",onClick:a=>{a.preventDefault(),a.stopPropagation(),t(e.id),i()},disabled:o.some(a=>a===e.id),children:"+ Follow"})]})}),$=({allUsers:e,currentPage:t,pageSize:r,totalUsersCount:o,onPageChangeHandler:i,getUnfollowUser:a,getFollowUser:g,followingInProgress:u,setFriend:l})=>e?s.jsxs("div",{className:c.friendsWrapper,children:[e&&s.jsx(h,{totalUsersCount:o,allUsers:e,pageSize:r,onPageChangeHandler:i,currentPage:t}),s.jsx("div",{className:c.usersContainer,children:e.map(d=>s.jsx(O,{user:d,currentPage:t,pageSize:r,getUnfollowUser:a,getFollowUser:g,followingInProgress:u,setFriend:l},d.id))}),s.jsx(h,{totalUsersCount:o,allUsers:e,pageSize:r,onPageChangeHandler:i,currentPage:t})]}):s.jsx("div",{children:s.jsx(v,{})});class q extends b.Component{constructor(){super(...arguments);f(this,"onPageChangeHandler",r=>{const{pageSize:o}=this.props;this.props.getAllUsers(r,o)})}componentDidMount(){const{currentPage:r,pageSize:o}=this.props;this.props.getAllUsers(r,o)}render(){return s.jsx($,{getAllUsers:this.props.getAllUsers,allUsers:this.props.allUsers,pageSize:this.props.pageSize,currentPage:this.props.currentPage,totalUsersCount:this.props.totalUsersCount,onPageChangeHandler:this.onPageChangeHandler,getFollowUser:this.props.getFollowUser,getUnfollowUser:this.props.getUnfollowUser,followingInProgress:this.props.followingInProgress})}}const L=e=>({allUsers:e.friendsPage.users,pageSize:e.friendsPage.pageSize,currentPage:e.friendsPage.currentPage,totalUsersCount:e.friendsPage.totalUsersCount,followingInProgress:e.friendsPage.followingInProgress}),J=U(L,{getAllUsers:w,setCurrentPage:k,getFollowUser:A,getUnfollowUser:W})(q);export{J as default};
