var _=Object.defineProperty;var j=(s,t,r)=>t in s?_(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var f=(s,t,r)=>(j(s,typeof t!="symbol"?t+"":t,r),r);import{e as w,j as e,f as m,p as U,P as v,c as C,R as b,q as A,s as F,t as W,v as I}from"./index-de219c64.js";import{d as k}from"./default-user-img-578decf0.js";const q="_pagination_1cr1o_1",B="_pageNumbers_1cr1o_7",S="_pageButton_1cr1o_32",D="_selectedPage_1cr1o_50",i={pagination:q,pageNumbers:B,pageButton:S,selectedPage:D},x=({totalUsersCount:s,pageSize:t,portionSize:r=10,onPageChangeHandler:a,currentPage:n})=>{let g=Math.ceil(s/t),d=[];for(let o=1;o<=g;o++)d.push(o);let u=Math.ceil(g/r),[l,c]=w.useState(1),P=(l-1)*r+1,N=l*r;return e.jsxs("div",{className:i.pagination,children:[l>1&&e.jsx("div",{className:i.pageButton,onClick:()=>{c(l-1)},children:"Prev"}),e.jsxs("div",{className:i.pageNumbers,children:[d.filter(o=>o>=P&&o<=N).map(o=>e.jsx("span",{className:n===o?m([i.pagination],"span",[i.selectedPage]):m([i.pagination],"span"),onClick:()=>{a(o)},children:o},o)),u>l&&e.jsx("div",{className:i.pageButton,onClick:()=>{c(l+1)},children:"Next"})]})]})},M="_friendsWrapper_1xwxq_1",R="_usersContainer_1xwxq_6",z="_userProfileWrapper_1xwxq_12",E="_userAvatar_1xwxq_26",H="_userName_1xwxq_32",p={friendsWrapper:M,usersContainer:R,userProfileWrapper:z,userAvatar:E,userName:H},h=({name:s,classN:t})=>e.jsx("button",{className:t,children:s}),O=({user:s,getFollowUser:t,getUnfollowUser:r,followingInProgress:a})=>e.jsx(U,{to:"/profile/"+s.id,className:p.userProfileWrapper,children:e.jsxs("div",{children:[e.jsx("img",{className:p.userAvatar,src:s.photos.small?s.photos.small:k,alt:"Avatar"}),e.jsx("div",{className:p.userName,children:s.name.charAt(0).toUpperCase()+s.name.slice(1)}),e.jsx("div",{className:p.userStatus,children:s.status===null?"No status":s.status}),s.followed?e.jsx("div",{onClick:n=>{n.preventDefault(),n.stopPropagation(),r(s.id)},children:e.jsx(h,{name:"- Unfollow",classN:m("follow-btn","unfollow-btn")})}):e.jsx("div",{onClick:n=>{n.preventDefault(),n.stopPropagation(),t(s.id)},children:e.jsx(h,{name:"+ Follow",classN:"follow-btn"})})]})}),$=({allUsers:s,currentPage:t,pageSize:r,totalUsersCount:a,onPageChangeHandler:n,getAllUsers:g,getUnfollowUser:d,getFollowUser:u,followingInProgress:l})=>g?e.jsxs("div",{className:p.friendsWrapper,children:[e.jsx(x,{totalUsersCount:a,allUsers:s,pageSize:r,onPageChangeHandler:n,currentPage:t}),e.jsx("div",{className:p.usersContainer,children:s.map(c=>e.jsx(O,{user:c,currentPage:t,pageSize:r,getUnfollowUser:d,getFollowUser:u,followingInProgress:l},c.id))}),e.jsx(x,{totalUsersCount:a,allUsers:s,pageSize:r,onPageChangeHandler:n,currentPage:t})]}):e.jsx("div",{children:e.jsx(v,{})});class L extends b.Component{constructor(){super(...arguments);f(this,"onPageChangeHandler",r=>{const{pageSize:a}=this.props;this.props.getAllUsers(r,a)})}componentDidMount(){const{currentPage:r,pageSize:a}=this.props;this.props.getAllUsers(r,a)}render(){return e.jsx($,{getAllUsers:this.props.getAllUsers,allUsers:this.props.allUsers,pageSize:this.props.pageSize,currentPage:this.props.currentPage,totalUsersCount:this.props.totalUsersCount,onPageChangeHandler:this.onPageChangeHandler,getFollowUser:this.props.getFollowUser,getUnfollowUser:this.props.getUnfollowUser,followingInProgress:this.props.followingInProgress})}}const T=s=>({allUsers:s.friendsPage.users,pageSize:s.friendsPage.pageSize,currentPage:s.friendsPage.currentPage,totalUsersCount:s.friendsPage.totalUsersCount,followingInProgress:s.friendsPage.followingInProgress}),K=C(T,{getAllUsers:A,setCurrentPage:F,getFollowUser:W,getUnfollowUser:I})(L);export{K as default};
